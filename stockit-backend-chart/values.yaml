service:
  type: ClusterIP
  port: 8080

# --- 1. Global / Common Settings ---
global:
  name: stockit
  springProfile: dev

# --- 2. Backend (Spring Boot) Configuration ---
backend:
  name: spring-backend
  image:
    repository: stockit-backend
    tag: latest
    pullPolicy: IfNotPresent
  service:
    port: 8080
    targetPort: 8080
    type: ClusterIP
  probe:
    path: /actuator/health
    initialDelaySeconds: 15
    periodSeconds: 30
  env:
    - name: SPRING_DATASOURCE_URL
      value: "jdbc:postgresql://postgres-db-service:5432/postgres-db"
    - name: SPRING_DATASOURCE_USERNAME
      value: "postgres-db"
    - name: SPRING_DATASOURCE_PASSWORD
      valueFrom:
        secretKeyRef:
          name: "{{ include \"stockit-backend-chart.fullname\" . }}-db-secret"
          key: POSTGRES_PASSWORD

# --- 3. AI Server (Python) Configuration ---
aiServer:
  name: python-ai-server
  image:
    repository: stockit-ai-server
    tag: latest
    pullPolicy: IfNotPresent
  service:
    port: 5000
    targetPort: 5000
    type: ClusterIP
  resources:
    limits:
      cpu: "1000m"
      memory: "2048Mi"
    requests:
      cpu: "500m"
      memory: "1024Mi"

# --- 4. Database (PostgreSQL) Configuration ---
db:
  name: postgres-db
  image: postgres
  tag: "15"
  service:
    port: 5432
    targetPort: 5432
    host: postgres-db-service
  persistence:
    enabled: true
    storageClass: ""
    size: 5Gi

# --- 5. Cache (Redis) Configuration ---
redis:
  name: stockit-redis
  image: redis
  tag: "7"
  service:
    port: 6379
    targetPort: 6379
    host: redis-service
  persistence:
    enabled: true
    size: 1Gi

# --- 6. Service Account Configuration ---
serviceAccount:
  create: true
  name: ""

# --- 7. Ingress Configuration ---
ingress:
  enabled: false
  className: "nginx"
  annotations: {}
  hosts:
    - host: stockit.local
      paths:
        - path: /
          pathType: Prefix
          backend:
            service:
              name: "spring-backend-service"
              port:
                number: 8080
  tls: []

# --- 8. HTTPRoute Configuration ---
httpRoute:
  enabled: false
  name: stockit-httproute
  host: stockit.local
  serviceName: spring-backend-service
  servicePort: 8080

# --- 9. Autoscaling (HPA) Configuration ---
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

# --- 10. Monitoring / PDB Configuration ---
serviceMonitor:
  enabled: false
pdb:
  enabled: false
