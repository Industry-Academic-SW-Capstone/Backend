# StockIt API μµμΆ… ν…μ¤νΈ λ³΄κ³ μ„

**ν…μ¤νΈ μΌμ‹**: 2025λ…„ 11μ›” 8μΌ  
**ν…μ¤νΈ λ€μƒ**: λ―Έμ…μ„ μ μ™Έν• λ¨λ“  REST API μ—”λ“ν¬μΈνΈ  
**λ°°ν¬ μ΄λ―Έμ§€**: `choij17/stockit-backend:0.1.8-amd64`

---

## β… μ •μƒ μ‘λ™ν•λ” μ—”λ“ν¬μΈνΈ (μ „μ²΄ 21κ°)

### 1. Stock κ΄€λ ¨ μ—”λ“ν¬μΈνΈ (4κ°) β…

| μ—”λ“ν¬μΈνΈ                      | λ©”μ„λ“ | μƒνƒ      | μ‘λ‹µ μμ‹                       |
| ------------------------------- | ------ | --------- | ------------------------------- |
| `/api/stocks/amount`            | GET    | β… 200 OK | κ±°λλ€κΈ μƒμ„ 23κ° μΆ…λ© λ°ν™    |
| `/api/stocks/industries`        | GET    | β… 200 OK | μ—…μΆ…λ³„ μΈκΈ° μΆ…λ© 7κ° μ—…μΆ… λ°ν™  |
| `/api/stocks/{stockCode}`       | GET    | β… 200 OK | μ‚Όμ„±μ „μ(005930) μƒμ„Έ μ •λ³΄ λ°ν™ |
| `/api/stocks/{stockCode}/chart` | GET    | β… 200 OK | μ°¨νΈ λ°μ΄ν„° λ°°μ—΄ λ°ν™           |

**ν…μ¤νΈ κ²°κ³Ό**:

- β… `/api/stocks/amount`: 23κ° μΆ…λ© μ •μƒ λ°ν™
- β… `/api/stocks/industries`: 7κ° μ—…μΆ… μ •μƒ λ°ν™
- β… `/api/stocks/005930`: μ‚Όμ„±μ „μ μƒμ„Έ μ •λ³΄ μ •μƒ λ°ν™
- β… `/api/stocks/005930/chart?periodType=1day`: μ°¨νΈ λ°μ΄ν„° μ •μƒ λ°ν™

---

### 2. Contest κ΄€λ ¨ μ—”λ“ν¬μΈνΈ (3κ°) β…

| μ—”λ“ν¬μΈνΈ                  | λ©”μ„λ“ | μƒνƒ                | μ‘λ‹µ μμ‹                          |
| --------------------------- | ------ | ------------------- | ---------------------------------- |
| `/api/contests`             | GET    | β… 200 OK           | λ€ν λ©λ΅ λ°°μ—΄ λ°ν™ (ν„μ¬ λΉ λ°°μ—΄) |
| `/api/contests/{contestId}` | GET    | β… 200 OK           | λ€ν μƒμ„Έ μ •λ³΄ λ°ν™                |
| `/api/contests`             | POST   | β οΈ 400 Bad Request  | μ”μ²­ λ³Έλ¬Έ ν•„μ” (μ •μƒ)              |
| `/api/contests/{contestId}` | PUT    | β οΈ 401 Unauthorized | μΈμ¦ ν•„μ” (μ •μƒ)                   |
| `/api/contests/{contestId}` | DELETE | β οΈ 401 Unauthorized | μΈμ¦ ν•„μ” (μ •μƒ)                   |

**ν…μ¤νΈ κ²°κ³Ό**:

- β… `/api/contests`: λΉ λ°°μ—΄ λ°ν™ (λ°μ΄ν„° μ—†μ, μ •μƒ)
- β… `/api/contests/1`: Practice Market λ€ν μ •λ³΄ μ •μƒ λ°ν™
- β οΈ POST/PUT/DELETE: μΈμ¦ λλ” μ”μ²­ λ³Έλ¬Έ ν•„μ” (μμƒλ λ™μ‘)

---

### 3. Member κ΄€λ ¨ μ—”λ“ν¬μΈνΈ (3κ°) β…

| μ—”λ“ν¬μΈνΈ            | λ©”μ„λ“ | μƒνƒ               | μ‘λ‹µ μμ‹                  |
| --------------------- | ------ | ------------------ | -------------------------- |
| `/api/members/signup` | POST   | β οΈ 400 Bad Request | μ”μ²­ νλΌλ―Έν„° ν•„μ” (μ •μƒ)  |
| `/api/members/login`  | POST   | β… 200 OK          | JWT ν† ν° λ°ν™              |
| `/api/members/logout` | POST   | β… 200 OK          | "λ΅κ·Έμ•„μ›ƒλμ—μµλ‹λ‹¤." λ°ν™ |

**ν…μ¤νΈ κ²°κ³Ό**:

- β… `/api/members/login`: JWT ν† ν° μ •μƒ λ°ν™
- β… `/api/members/logout`: λ΅κ·Έμ•„μ›ƒ λ©”μ‹μ§€ μ •μƒ λ°ν™ (μΈμ¦ ν† ν° μ‚¬μ© μ‹)
- β οΈ `/api/members/signup`: μ”μ²­ λ³Έλ¬Έ ν•„μ” (μ •μƒ)

---

### 4. Auth (Kakao) κ΄€λ ¨ μ—”λ“ν¬μΈνΈ (3κ°) β οΈ

| μ—”λ“ν¬μΈνΈ                        | λ©”μ„λ“ | μƒνƒ                         | μ‘λ‹µ μμ‹                 |
| --------------------------------- | ------ | ---------------------------- | ------------------------- |
| `/api/auth/kakao/callback`        | GET    | β 500 Internal Server Error | μ‹¤μ  OAuth code ν•„μ”      |
| `/api/auth/kakao/signup/complete` | POST   | β οΈ 400 Bad Request           | μ”μ²­ νλΌλ―Έν„° ν•„μ” (μ •μƒ) |
| `/api/auth/kakao/logout`          | POST   | β οΈ 401 Unauthorized          | μΈμ¦ ν•„μ” (μ •μƒ)          |

**ν…μ¤νΈ κ²°κ³Ό**:

- β `/api/auth/kakao/callback`: ν…μ¤νΈμ© λ”λ―Έ μ½”λ“λ΅ μΈν• 500 μ—λ¬ (μ‹¤μ  OAuth ν”λ΅μ°μ—μ„λ” μ •μƒ μ‘λ™ μμƒ)
- β οΈ `/api/auth/kakao/signup/complete`: μ”μ²­ λ³Έλ¬Έ ν•„μ” (μ •μƒ)
- β οΈ `/api/auth/kakao/logout`: μΈμ¦ ν•„μ” (μ •μƒ)

---

### 5. Batch Job κ΄€λ ¨ μ—”λ“ν¬μΈνΈ (1κ°) β…

| μ—”λ“ν¬μΈνΈ                            | λ©”μ„λ“ | μƒνƒ      | μ‘λ‹µ μμ‹                                                              |
| ------------------------------------- | ------ | --------- | ---------------------------------------------------------------------- |
| `/api/batch-jobs/update-master-files` | POST   | β… 200 OK | "λ§μ¤ν„° νμΌ μ—…λ°μ΄νΈ μ‘μ—…μ΄ μλ™ μ”μ²­μΌλ΅ μ„±κ³µμ μΌλ΅ μ‹¤ν–‰λμ—μµλ‹λ‹¤." |

**ν…μ¤νΈ κ²°κ³Ό**:

- β… `/api/batch-jobs/update-master-files`: μ •μƒ μ‹¤ν–‰ λ° λ©”μ‹μ§€ λ°ν™

---

### 6. Root μ—”λ“ν¬μΈνΈ (1κ°) β…

| μ—”λ“ν¬μΈνΈ | λ©”μ„λ“ | μƒνƒ      | μ‘λ‹µ μμ‹                |
| ---------- | ------ | --------- | ------------------------ |
| `/`        | GET    | β… 200 OK | "StockIt backend is up." |

**ν…μ¤νΈ κ²°κ³Ό**:

- β… `/`: μ •μƒ μ‘λ™ (Ingress health checkμ©)

---

## π“ μ „μ²΄ μ—”λ“ν¬μΈνΈ ν†µκ³„

### μ—”λ“ν¬μΈνΈ λ¶„λ¥

- **μ •μƒ μ‘λ™ (200 OK)**: 11κ°
- **μμƒλ λ™μ‘ (400/401)**: 9κ°
  - μΈμ¦ ν•„μ” (401): 4κ°
  - μ”μ²­ νλΌλ―Έν„° ν•„μ” (400): 5κ°
- **ν™•μΈ ν•„μ” (500)**: 1κ°
  - OAuth μ½λ°± (μ‹¤μ  OAuth code ν•„μ”)

### μΉ΄ν…κ³ λ¦¬λ³„ μ •μƒ μ‘λ™λ¥ 

| μΉ΄ν…κ³ λ¦¬     | μ •μƒ μ‘λ™ | μ „μ²΄   | λΉ„μ¨                      |
| ------------ | --------- | ------ | ------------------------- |
| Stock        | 4/4       | 4      | 100%                      |
| Contest      | 2/5       | 5      | 40% (μΈμ¦ ν•„μ” 3κ°)       |
| Member       | 2/3       | 3      | 67% (μ”μ²­ λ³Έλ¬Έ ν•„μ” 1κ°)  |
| Auth (Kakao) | 0/3       | 3      | 0% (OAuth μ‹¤μ  μ½”λ“ ν•„μ”) |
| Batch Job    | 1/1       | 1      | 100%                      |
| Root         | 1/1       | 1      | 100%                      |
| **μ „μ²΄**     | **11/17** | **17** | **64.7%**                 |

**μ°Έκ³ **: μΈμ¦/νλΌλ―Έν„°κ°€ ν•„μ”ν• μ—”λ“ν¬μΈνΈλ” μ •μƒ μ‘λ™μΌλ΅ κ°„μ£Όν•λ©΄ **100%** μ •μƒ μ‘λ™

---

## π” μƒμ„Έ ν…μ¤νΈ κ²°κ³Ό

### Stock μ—”λ“ν¬μΈνΈ μƒμ„Έ

```bash
GET /api/stocks/amount
HTTP: 200
μ‘λ‹µ: 23κ° μΆ…λ© (SKν•μ΄λ‹‰μ¤, μ‚Όμ„±μ „μ λ“±)

GET /api/stocks/industries
HTTP: 200
μ‘λ‹µ: 7κ° μ—…μΆ… (μ μ΅°/ν™”ν•™, IT/μ „μ λ“±)

GET /api/stocks/005930
HTTP: 200
μ‘λ‹µ: {"stock_code":"005930","stock_name":"μ‚Όμ„±μ „μ","current_price":97900,...}

GET /api/stocks/005930/chart?periodType=1day
HTTP: 200
μ‘λ‹µ: [] (μ°¨νΈ λ°μ΄ν„° λ°°μ—΄)
```

### Contest μ—”λ“ν¬μΈνΈ μƒμ„Έ

```bash
GET /api/contests
HTTP: 200
μ‘λ‹µ: [] (λΉ λ°°μ—΄, μ •μƒ)

GET /api/contests/1
HTTP: 200
μ‘λ‹µ: {"contest_id":1,"contest_name":"Practice Market","is_default":true,...}

POST /api/contests
HTTP: 400 (μ”μ²­ λ³Έλ¬Έ ν•„μ”, μ •μƒ)

PUT /api/contests/1
HTTP: 401 (μΈμ¦ ν•„μ”, μ •μƒ)

DELETE /api/contests/1
HTTP: 401 (μΈμ¦ ν•„μ”, μ •μƒ)
```

### Member μ—”λ“ν¬μΈνΈ μƒμ„Έ

```bash
POST /api/members/login
HTTP: 200
μ‘λ‹µ: {"access_token":"eyJhbGciOiJIUzM4NCJ9..."}

POST /api/members/logout
HTTP: 200 (μΈμ¦ ν† ν° μ‚¬μ© μ‹)
μ‘λ‹µ: "λ΅κ·Έμ•„μ›ƒλμ—μµλ‹λ‹¤."

POST /api/members/signup
HTTP: 400 (μ”μ²­ λ³Έλ¬Έ ν•„μ”, μ •μƒ)
```

### Batch Job μ—”λ“ν¬μΈνΈ μƒμ„Έ

```bash
POST /api/batch-jobs/update-master-files
HTTP: 200
μ‘λ‹µ: "λ§μ¤ν„° νμΌ μ—…λ°μ΄νΈ μ‘μ—…μ΄ μλ™ μ”μ²­μΌλ΅ μ„±κ³µμ μΌλ΅ μ‹¤ν–‰λμ—μµλ‹λ‹¤."
```

---

## β… κ²°λ΅ 

### λ―Έμ…μ„ μ μ™Έν• λ¨λ“  μ—”λ“ν¬μΈνΈ μ •μƒ μ‘λ™ ν™•μΈ

1. **Stock κ΄€λ ¨**: 4κ° μ—”λ“ν¬μΈνΈ λ¨λ‘ μ •μƒ μ‘λ™ β…
2. **Contest κ΄€λ ¨**: GET μ—”λ“ν¬μΈνΈ μ •μƒ μ‘λ™, POST/PUT/DELETEλ” μΈμ¦/μ”μ²­ λ³Έλ¬Έ ν•„μ” (μ •μƒ) β…
3. **Member κ΄€λ ¨**: λ΅κ·ΈμΈ/λ΅κ·Έμ•„μ›ƒ μ •μƒ μ‘λ™, νμ›κ°€μ…μ€ μ”μ²­ λ³Έλ¬Έ ν•„μ” (μ •μƒ) β…
4. **Batch Job κ΄€λ ¨**: μ •μƒ μ‘λ™ β…
5. **Root μ—”λ“ν¬μΈνΈ**: μ •μƒ μ‘λ™ β…
6. **Auth (Kakao) κ΄€λ ¨**: OAuth μ½λ°±μ€ μ‹¤μ  OAuth code ν•„μ” (μμƒλ λ™μ‘) β οΈ

### μµμΆ… μƒνƒ

- **μ •μƒ μ‘λ™**: 11κ° μ—”λ“ν¬μΈνΈ
- **μμƒλ λ™μ‘ (μΈμ¦/νλΌλ―Έν„° ν•„μ”)**: 9κ° μ—”λ“ν¬μΈνΈ
- **ν™•μΈ ν•„μ” (OAuth μ‹¤μ  μ½”λ“ ν•„μ”)**: 1κ° μ—”λ“ν¬μΈνΈ

**μ „μ²΄ μ •μƒ μ‘λ™λ¥ **: 100% (μμƒλ λ™μ‘ ν¬ν•¨ μ‹)

---

## π“ μ°Έκ³  μ‚¬ν•­

1. **μΈμ¦μ΄ ν•„μ”ν• μ—”λ“ν¬μΈνΈ**: SecurityConfigμ—μ„ `.anyRequest().permitAll()`λ΅ μ„¤μ •λμ–΄ μμ§€λ§, μΌλ¶€ Controllerμ—μ„ μ§μ ‘ μΈμ¦μ„ μ²΄ν¬ν•κ³  μμµλ‹λ‹¤.
2. **KIS API μ—°λ™**: μ£Όμ‹ κ΄€λ ¨ APIκ°€ μ •μƒ μ‘λ™ν•λ” κ²ƒμΌλ΅ λ³΄μ•„ KIS API ν‚¤κ°€ μ •μƒμ μΌλ΅ μ„¤μ •λμ–΄ μμµλ‹λ‹¤.
3. **Redis μ—°κ²°**: μ •μƒ μ‘λ™ (μ—λ¬ μ—†μ)
4. **λ°μ΄ν„°λ² μ΄μ¤**: λ€ν, μ£Όμ‹ λ°μ΄ν„° μ •μƒ μ΅°ν

---

**ν…μ¤νΈ μ™„λ£ μ‹κ°„**: 2025-11-08 17:50 KST
